<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
        <title>Thêm Content</title>
    <style>
      /* CSS để ẩn phần Feature hoặc Movie List tùy theo lựa chọn */
      .section {
        display: none;
      }

      #feature-section.active,
      #movie-list-section.active,
      #video-manager-section.active{
        display: block;
      }
/* Cấu trúc cơ bản */

body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    
    color: #333;
    
}
      
.add-content {
  margin-left: 25px;  /* Di chuyển tất cả phần tử con sang trái */
 
}

.add-content * {
  margin-left: 0;     /* Loại bỏ margin mặc định */
  padding: 0;         /* Loại bỏ padding mặc định */
}

/* Tiêu đề */
h1, h2, h3 {
    color: #3498db;
    margin-bottom: 15px;
}

/* Các phần tử form */
label {
    font-weight: bold;
    display: inline-block; /* Chỉnh label thành inline-block để gắn ngay với input */
    width: auto;  /* Tự động điều chỉnh chiều rộng của label */
    margin-right: 10px; /* Thêm khoảng cách nhỏ giữa label và input */
    color: #85C1E9;
}
      


input[type="text"],
input[type="url"],
textarea {
    width: calc(100% - 30px); /* Làm cho input gần với label */
    max-width:500px;
    padding: 8px;
    margin-bottom: 8px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 1rem;
  
}

textarea {
    resize: vertical;
    height: 90px;
}

button {
    padding: 8px 15px;
    background-color: #3498db;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.3s ease;
    margin-top: 10px;
}

button:hover {
    background-color: #2980b9;
}

/* Form, bảng và các container */
.section {
    
    padding: 15px;
    margin-bottom: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

#order-content-section {
    
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

select {
    padding: 8px;
    border-radius: 5px;
    border: 1px solid #ccc;
    font-size: 1rem;
    margin-bottom: 8px;
}

#movie-list-table, #order-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
  color: blue;
}

#movie-list-table th, #order-table th,
#movie-list-table td, #order-table td {
    padding: 8px;
    border: 1px solid #ccc;
    text-align: left;
}

#movie-list-table th, #order-table th {
    background-color: #3498db;
    color:  lightgreen;
}

.video-item {
    margin-bottom: 15px;
}

.video-details {
    margin-top: 8px;
    background-color: #f9f9f9;
    padding: 8px;
    border-radius: 5px;
}

.toggle-details {
    margin-top: 8px;
    background-color: #f39c12;
    color: white;
    border: none;
    padding: 6px 8px;
    border-radius: 5px;
    cursor: pointer;
    margin-left: 50px; /* Di chuyển toggle details sang trái 50px */
}

.toggle-details:hover {
    background-color: #e67e22;
}



/* Tạo hiệu ứng cho form khi tải */
input:focus,
textarea:focus,
select:focus {
    border-color: #3498db;
    outline: none;
}

input[type="text"]:disabled,
input[type="url"]:disabled,
textarea:disabled,
select:disabled {
    
}
/* Hiệu ứng nổi bật khi chọn hàng */
tr.highlight {
 
  border: 2px solid #007bff;  /* Viền xanh để làm nổi bật */
}

tr {
  transition: transform 0.3s ease; /* Thêm hiệu ứng chuyển động mượt mà khi thay đổi vị trí */
}

tr.moving {
  transition: transform 0.3s ease; /* Thêm hiệu ứng chuyển động cho hàng khi đổi vị trí */
}
.horizontal-container {
  display: flex;
  align-items: left; /* Căn giữa các phần tử theo chiều dọc */
  gap: 10px; /* Khoảng cách giữa các phần tử */
}

    </style>
     

  </head>
  <body>
          <div class="navbar">
      <div class="navbar-container">
        <div class="logo-container">
          <h1 class="logo animated-title2">OChinChin</h1>
        </div>
        <div class="menu-container"></div>
<div class="profile-container">
  <img class="profile-picture" id="profilePicture"  alt="Profile Picture">
  
  <div class="profile-text-container" id="profileTextContainer">
    <span class="profile-text">Profile</span>
    <i class="fas fa-caret-down"></i>
  </div>
  
  <div id="dropdownMenu" style="display: none;">
    <div id="name">Name: <span id="loggedUserName"></span></div>
    <div id="email">Email: <span id="loggedUserEmail"></span></div>
    
    <div class="button-container">
      <button id="changeProfileButton">Change Profile</button> <!-- Thêm nút thay đổi -->
      <button id="authButton">Login</button> <!-- Nút sẽ thay đổi thành "Logout" khi người dùng đã đăng nhập -->
    </div>
  </div>
</div>
      <div class="toggle"></div>
      </div>
    </div>

    <div class="sidebar"></div>

  <div class="container">
    <div class="content-container" id="content-container">
<div class="add-content">
  
      
  <h1>Thêm Content</h1>

  <!-- Chọn loại nội dung -->
  <div class="horizontal-container">
    <label for="content-type">Chọn loại nội dung:</label>
    <select id="content-type">
      <option value="feature">Feature</option>
      <option value="movie-list">Movie List</option>
      <option value="order">Sắp xếp</option>
      <option value="delete">Delete-content</option>
      <option value="add-video">Video</option>
    </select>
  </div>

  <div id="feature-section" class="section">
  <h2>Feature</h2>
  <label for="select-feature">Chọn Feature:</label>
  <select id="select-feature">
    <!-- Tùy chọn sẽ được nạp từ Firestore -->
  </select>
  <button id="load-feature">Tải Feature</button>

  <form id="new-feature-form">
    <label>Tên file Feature:</label><br />
    <input type="text" name="featureName" id="featureName" placeholder="feature-name" required /><br />
    <label>Title:</label><br />
    <input type="text" name="title" id="title" placeholder="Nhập Feature title" required /><br />
    
    <label>Chọn video :</label><br />
    <select id="video-dropdown">
      <option value="">-- Chọn video --</option>
      <!-- Tùy chọn video sẽ được thêm bằng JavaScript -->
    </select>
    <br />

    <label>URL Video:</label><br />
    <input type="text" name="featureVideoUrl" id="video-url" placeholder="Nhập URL video" required /><br />
    
    <label>URL hình nền:</label><br />
    <input type="text" name="backgroundUrl" id="backgroundUrl" placeholder="Nhập URL hình nền" required /><br />
    <label>URL hình Feature:</label><br />
    <input type="text" name="featuredImgUrl" id="featuredImgUrl" placeholder="Nhập URL Feature" required /><br />
    <label>Mô tả:</label><br />
    <input type="text" name="featuredDesc" id="featuredDesc" placeholder="Nhập mô tả" required/><br />
    <button type="submit" id="save-feature">Lưu Feature</button>
  </form>
</div>


<!-- Bảng Movie List -->
<div id="movie-list-section" class="section">
  <h2>Movie List</h2>
  <label for="select-movie-list">Chọn Movie List:</label>
  <select id="select-movie-list">
    <!-- Tùy chọn sẽ được nạp từ Firestore -->
  </select>
  <button id="load-movie-list">Tải Movie List</button>

  <form id="new-movie-list-form">
    <label>Tên file Movie List:</label><br />
    <input type="text" name="movieListName" placeholder="movie-list-name" required /><br />
    <label>Tên danh sách Movie:</label><br />
    <input type="text" name="listName" placeholder="Nhập tên danh sách Movie" required /><br />
    
    <div id="movies-container">
      <h3>Movie List:</h3>
      <label for="select-existing-video">Chọn video từ danh sách:</label><br />
      <select id="select-existing-video">
        <!-- Tùy chọn video sẽ được thêm bằng JavaScript -->
      </select>
      <button type="button" id="add-to-list">Thêm Movie</button>
      <table id="movie-list-table">
    <thead>
      <tr>
        <th>Video ID</th>
        <th>Remove</th>
      </tr>
    </thead>
    <tbody id="movie-list-table-body">
      <!-- Các video đã chọn sẽ được thêm vào đây -->
    </tbody>
  </table>
    </div>

    <button type="submit" id="save-movieList">Lưu Movie List</button>
  </form>
</div>

<!-- Bảng Video Manager -->
<div id="video-manager-section" class="section">
  <h2>Video</h2>

  <!-- Dropdown để chọn video đã có -->
  <label for="add-video-to-list">Chọn video :</label>
  <select id="add-video-to-list">
    
  </select>
  <button id="load-video">Tải Video</button><br /><br />

<form id="new-video-form">
  <div id="video-form">
    <label>Tên Video:</label><br />
    <input type="text" name="videoName" id="videoName" placeholder="Nhập tên video" required /><br />

    <label>Tiêu đề video:</label><br />
    <input type="text" name="videoTitle"  id="videoTitle" placeholder="Nhập tiêu đề video" /><br />

    <label>Mô tả:</label><br />
    <input type="text" name="videoDescription" id="videoDescription" placeholder="Nhập mô tả video"/><br />

    <label>URL Thumbnail:</label><br />
    <input type="url" name="videoThumbnail"  id="videoThumbnail" placeholder="Nhập URL thumbnail" /><br />

    <label>URL Video:</label><br />
    <input type="url" name="videoUrl" id="videoUrl" placeholder="Nhập URL video" /><br />

    <button type="submit">Lưu Video</button>
  </div>
  </form>
</div>


  <!-- Bảng Order Content -->
  <div id="order-content-section" style="display: none;">
    <h3>Order Content</h3>
    <table id="order-table">
      <thead>
        <tr>
          <th>Content</th>
          <th>Name</th>
        </tr>
      </thead>
      <tbody id="order-table-body">
        <!-- Các hàng dữ liệu sẽ được thêm bằng JavaScript -->
      </tbody>
    </table>
    <button id="save-order-btn">Lưu thứ tự</button>
  </div>

<!-- Phần xóa nội dung, ẩn đi ban đầu -->
<div id="delete-container" style="display: none;">
  <!-- Chọn loại nội dung cần xóa -->
  <div>
    <label for="delete-content-type">Chọn loại nội dung cần xóa:</label>
    <select id="delete-content-type">
      <option value="feature">Feature</option>
      <option value="movie-list">Movie List</option>
      <option value="video">Video</option>
    </select>
  </div>

  <!-- Nhập tên file cần xóa -->
  <div>
    <label for="content-name">Chọn nội dung cần xóa:</label>
    <select id="content-list">
    </select>

  </div>

  <button id="delete-content-btn">Xóa nội dung</button>

  <!-- Phần nhập mật khẩu ẩn đi ban đầu -->
  <div id="password-container" style="display: none;">
    <label for="password">Nhập mật khẩu:</label>
    <input type="password" id="password" placeholder="Nhập mật khẩu để xác nhận xóa" />
    <button id="confirm-delete-btn">Xác nhận xóa</button>
  </div>
</div>
  <!-- Toast container, nơi sẽ chứa tất cả các thông báo -->
<div id="toast-container"></div>

    </div>
    </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.14.0/Sortable.min.js"></script>

    <script>

const style = document.createElement('style');
style.textContent = `
  /* Đặt cho mọi ô nhập liệu và textarea */
  input[type="text"]:focus,
  textarea:focus {
    outline: 2px solid #007BFF;
  }

  /* Container để chứa nút Copy/Paste */
  .copy-paste-group {
    display: none; /* Mặc định ẩn nhóm nút */
    position: absolute; /* Đặt vị trí tuyệt đối */
    top: 100%; /* Đặt nút xuống phía dưới ô nhập liệu */
    left: 0;
    margin: 5px; /* Khoảng cách giữa ô nhập liệu và nút */
  }

  /* Cài đặt nút Copy/Paste */
  .copy-paste-group button {
    background-color: #007BFF;
    color: white;
    border: none;
    padding: 7px 10px;
    cursor: pointer;
    font-size: 14px;
    border-radius: 4px;
    transition: background-color 0.3s ease;
  }

  .copy-paste-group button:hover {
    background-color: #0056b3;
  }
  /* Cài đặt chung cho tất cả cp-button */
cp-button {
  display: inline-block;
  background-color: #007BFF;
  color: white;
  border: none;
  padding: 5px 10px;
  margin:0px 4px;
  cursor: pointer;
  font-size: 14px;
  border-radius: 4px;
  transition: background-color 0.3s ease;
  text-align: center;
  line-height: 1.5;
  user-select: none;
}

cp-button:hover {
  background-color: #0056b3;
}

cp-button:focus {
  outline: none; /* Xóa outline khi focus */
}



`;

document.head.appendChild(style);

// Tạo nhóm nút Copy/Paste cho một input
function addCopyPasteButtons(input) {
  // Tạo nhóm nút Copy/Paste
  const buttonGroup = document.createElement('div');
  buttonGroup.className = 'copy-paste-group';

  // Tạo nút Copy
  const copyBtn = document.createElement('cp-button');
  copyBtn.className = 'cp-button copy-btn'; // Đổi tên lớp thành 'cp-button copy-btn'
  copyBtn.textContent = 'Copy';
  buttonGroup.appendChild(copyBtn);

  // Tạo nút Paste
  const pasteBtn = document.createElement('cp-button');
  pasteBtn.className = 'cp-button paste-btn'; // Đổi tên lớp thành 'cp-button paste-btn'
  pasteBtn.textContent = 'Paste';
  buttonGroup.appendChild(pasteBtn);

  // Chèn nhóm nút vào phần tử chứa input/textarea
  input.parentElement.style.position = 'relative'; // Đặt position relative cho phần tử cha
  input.parentElement.appendChild(buttonGroup);

  // Hiển thị nhóm nút khi ô nhập liệu được focus
  input.addEventListener('focus', () => {
    buttonGroup.style.display = 'block'; // Hiển thị nhóm nút khi focus vào input
    updateButtonPosition(); // Cập nhật vị trí nút khi focus
  });

  // Cập nhật vị trí nút Copy/Paste mỗi khi người dùng gõ
  input.addEventListener('input', () => {
    updateButtonPosition();
  });

  // Xử lý sự kiện mousedown cho nút copy/paste để ngừng sự kiện blur
  copyBtn.addEventListener('mousedown', (event) => {
    event.stopPropagation(); // Ngừng sự kiện blur khi nhấn vào nút copy
  });

  pasteBtn.addEventListener('mousedown', (event) => {
    event.stopPropagation(); // Ngừng sự kiện blur khi nhấn vào nút paste
  });

  // Cập nhật vị trí của nút Copy/Paste
  function updateButtonPosition() {
    let topPosition = -260;  // Bắt đầu từ vị trí offsetTop của phần tử input
    let leftPosition = -70;  // Bắt đầu từ vị trí offsetLeft của phần tử input
    let currentElement = input;

    // Lặp qua các phần tử cha để tính toán offsetTop và offsetLeft
    while (currentElement) {
      topPosition += currentElement.offsetTop;  // Cộng dồn offsetTop của từng phần tử cha
      leftPosition += currentElement.offsetLeft;  // Cộng dồn offsetLeft của từng phần tử cha
      currentElement = currentElement.offsetParent;  // Chuyển đến phần tử cha tiếp theo
    }

    // Điều chỉnh để nhóm nút nằm ngay phía trên của ô nhập liệu
    buttonGroup.style.top = `${topPosition - buttonGroup.offsetHeight - 5}px`; // Nút ở phía trên ô input, cách 5px
    buttonGroup.style.left = `${leftPosition}px`; // Cập nhật vị trí left theo input

    // Đảm bảo rằng group button được căn chỉnh đúng
    buttonGroup.style.position = 'absolute'; // Đảm bảo group button có position absolute
  }

  // Khi ô nhập liệu được focus, chọn toàn bộ nội dung
  input.addEventListener('focus', () => {
    input.select(); // Chọn toàn bộ nội dung trong input
  });

  // Sự kiện Copy
  copyBtn.addEventListener('click', () => {
    input.select(); // Chọn toàn bộ nội dung trong input
    navigator.clipboard.writeText(input.value).then(() => {
      alert('Nội dung đã được copy!');
    }).catch(err => {
      console.error('Không thể copy:', err);
      alert('Không thể copy nội dung!');
    });
  });

  // Sự kiện Paste
  pasteBtn.addEventListener('click', async () => {
    try {
      const text = await navigator.clipboard.readText();  // Đọc nội dung từ clipboard
      input.value = text;  // Dán nội dung vào ô input
      alert('Đã paste nội dung!');
    } catch (err) {
      console.error('Không thể paste:', err);
      alert('Không thể dán nội dung!');
    }
  });

  // Ẩn nhóm nút sau 0.3 giây khi mất focus
  input.addEventListener('blur', () => {
    setTimeout(() => {
      buttonGroup.style.display = 'none'; // Ẩn nhóm nút sau 0.3 giây
    }, 300); // 0.3 giây (300ms)
  });

  // Cập nhật vị trí khi nút được thêm mới
  updateButtonPosition(); // Đảm bảo rằng nút Copy/Paste có vị trí đúng ngay từ đầu
}

// Áp dụng cho các input hiện tại
document.querySelectorAll('input[type="text"], textarea').forEach((input) => {
  addCopyPasteButtons(input);
});
// Quan sát sự thay đổi trong DOM để tự động thêm nút Copy/Paste cho các input mới
const observer = new MutationObserver((mutationsList) => {
  mutationsList.forEach((mutation) => {
    if (mutation.type === 'childList') {
      mutation.addedNodes.forEach((node) => {
        if (node.nodeType === 1) { // Kiểm tra nếu là phần tử HTML
          // Thêm nút Copy/Paste cho tất cả các input mới được thêm vào DOM
          node.querySelectorAll('input[type="text"], textarea').forEach((input) => {
            addCopyPasteButtons(input);
          });
        }
      });
    }
  });
});



// Thiết lập observer để theo dõi sự thay đổi trong DOM
observer.observe(document.body, {
  childList: true, // Quan sát thêm/xóa phần tử
  subtree: true,    // Quan sát toàn bộ cây DOM
});

    
    </script>
      <script src="/script/app.js" defer></script>
      <script src="/script/animated.js" defer></script>
    <script type="module" src="/script/profile.js" defer></script>
<script type="module" src="/script/addContent.js" defer></script>
  </body>
</html>
